<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Referencing records • tidyged</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Referencing records">
<meta property="og:description" content="tidyged">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyged</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jl5000/tidyged/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="cross_references_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Referencing records</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jl5000/tidyged/blob/master/vignettes/cross_references.Rmd"><code>vignettes/cross_references.Rmd</code></a></small>
      <div class="hidden name"><code>cross_references.Rmd</code></div>

    </div>

    
    
<div id="cross-references" class="section level2">
<h2 class="hasAnchor">
<a href="#cross-references" class="anchor"></a>Cross references</h2>
<p>GEDCOM records are given unique identifiers known as xrefs (cross-references) to allow other records to link to them. These are alphanumeric strings surrounded by ‘@’ symbols. The <code>tidyged</code> package creates these xrefs automatically:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jl5000.github.io/tidyged/">tidyged</a></span><span class="op">)</span>

<span class="va">simpsons</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gedcom.html">gedcom</a></span><span class="op">(</span><span class="fu"><a href="../reference/subm.html">subm</a></span><span class="op">(</span><span class="st">"Me"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi.html">add_indi</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi_names.html">add_indi_names</a></span><span class="op">(</span>given <span class="op">=</span> <span class="st">"Homer"</span>, surname <span class="op">=</span> <span class="st">"Simpson"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi.html">add_indi</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"F"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi_names.html">add_indi_names</a></span><span class="op">(</span>given <span class="op">=</span> <span class="st">"Marge"</span>, surname <span class="op">=</span> <span class="st">"Simpson"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi.html">add_indi</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"F"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi_names.html">add_indi_names</a></span><span class="op">(</span>given <span class="op">=</span> <span class="st">"Lisa"</span>, surname <span class="op">=</span> <span class="st">"Simpson"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_indi.html">add_indi</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span> <span class="op">%&gt;%</span>  
  <span class="fu"><a href="../reference/add_indi_names.html">add_indi_names</a></span><span class="op">(</span>given <span class="op">=</span> <span class="st">"Bart"</span>, surname <span class="op">=</span> <span class="st">"Simpson"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_note.html">add_note</a></span><span class="op">(</span><span class="st">"This is a note"</span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">simpsons</span>, <span class="va">tag</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"INDI"</span>, <span class="st">"NOTE"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">level</th>
<th align="left">record</th>
<th align="left">tag</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">
<span class="citation">@I1</span>@</td>
<td align="left">INDI</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">
<span class="citation">@I2</span>@</td>
<td align="left">INDI</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">
<span class="citation">@I3</span>@</td>
<td align="left">INDI</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">
<span class="citation">@I4</span>@</td>
<td align="left">INDI</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">
<span class="citation">@N1</span>@</td>
<td align="left">NOTE</td>
<td align="left">This is a note</td>
</tr>
</tbody>
</table>
<p>Note the unique xrefs in the record column.</p>
</div>
<div id="activation" class="section level2">
<h2 class="hasAnchor">
<a href="#activation" class="anchor"></a>Activation</h2>
<p>In the above example a series of Individual records are created. After each record is created, the name(s) of the individual are defined without actually explicitly referencing the Individual record. This is because they are acting on the <em>active record</em>. A record becomes active when it is created or when it is explicitly activated.</p>
<p>We can query the active record using the <code><a href="../reference/get_active_record.html">get_active_record()</a></code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_active_record.html">get_active_record</a></span><span class="op">(</span><span class="va">simpsons</span><span class="op">)</span>
<span class="co">#&gt; [1] "@N1@"</span></code></pre></div>
<p>Since the last record to be created was the Note record, it is the active record. The active record is stored as an attribute of the tibble.</p>
<p>We can use activation to add to existing records. If we want to activate another record, we can activate it using the <code>activate_*()</code> family of functions together with its xref:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simpsons</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/activate_indi.html">activate_indi</a></span><span class="op">(</span><span class="st">"@I2@"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/get_active_record.html">get_active_record</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "@I2@"</span></code></pre></div>
<p>It can be tedious to have to manually look up these xrefs, and so <code>tidyged</code> allows the user to instead enter an expression uniquely identifying the record:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simpsons</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/activate_indi.html">activate_indi</a></span><span class="op">(</span><span class="st">"Marge"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/get_active_record.html">get_active_record</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "@I2@"</span></code></pre></div>
<p>Note that the full name does not need to be given, since the expression is treated as a regular expression. As long as it is detected in the name of the individual it will be found (romanised and phonetic variants of the name are also searched, if they are provided in the record). Note that if forward-slashes are in the name, they should not be used in any expressions.</p>
<p>If no match or more than one match is found, it will result in an error:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simpsons</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/activate_indi.html">activate_indi</a></span><span class="op">(</span><span class="st">"Simpson"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/get_active_record.html">get_active_record</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Error in find_xref(gedcom, xrefs_indi(gedcom), c("NAME", "ROMN", "FONE"), : More than one record found for the given regex: Homer Simpson, Marge Simpson, Lisa Simpson, Bart Simpson. </span>
<span class="co">#&gt; Try being more specific or supplying the xref explicitly.</span></code></pre></div>
<p>This functionality can be found when referencing all records, except the Family Group record (where an xref must be provided). The following attributes are used to uniquely identify these records:</p>
<ul>
<li>Individuals: Full name (NAME tag), phonetic variation (FONE), romanised variation (ROMN);</li>
<li>Multimedia: File reference (FILE);</li>
<li>Note: User text (NOTE);</li>
<li>Source: Title (TITL);</li>
<li>Repository: Name (NAME).</li>
</ul>
</div>
<div id="removing-records" class="section level2">
<h2 class="hasAnchor">
<a href="#removing-records" class="anchor"></a>Removing records</h2>
<p>When removing entire records, you don’t have to necessarily rely on activating them first. The same referencing techniques above can be used to remove records immediately:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simpsons</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/remove_indi.html">remove_indi</a></span><span class="op">(</span><span class="st">"Homer"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/df_indi.html">df_indi</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="10%">
<col width="2%">
<col width="10%">
<col width="11%">
<col width="10%">
<col width="11%">
<col width="5%">
<col width="5%">
<col width="9%">
<col width="9%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">xref</th>
<th align="left">name</th>
<th align="left">sex</th>
<th align="left">date_of_birth</th>
<th align="left">place_of_birth</th>
<th align="left">date_of_death</th>
<th align="left">place_of_death</th>
<th align="left">mother</th>
<th align="left">father</th>
<th align="left">num_siblings</th>
<th align="right">num_children</th>
<th align="left">last_modified</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">
<span class="citation">@I2</span>@</td>
<td align="left">Marge Simpson</td>
<td align="left">F</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="right">0</td>
<td align="left">28 FEB 2021</td>
</tr>
<tr class="even">
<td align="left">
<span class="citation">@I3</span>@</td>
<td align="left">Lisa Simpson</td>
<td align="left">F</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="right">0</td>
<td align="left">28 FEB 2021</td>
</tr>
<tr class="odd">
<td align="left">
<span class="citation">@I4</span>@</td>
<td align="left">Bart Simpson</td>
<td align="left">M</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="right">0</td>
<td align="left">28 FEB 2021</td>
</tr>
</tbody>
</table>
</div>
<div id="a-note-about-unique-record-identifiers" class="section level2">
<h2 class="hasAnchor">
<a href="#a-note-about-unique-record-identifiers" class="anchor"></a>A note about unique record identifiers</h2>
<p>Record identifiers have been a topic of much discussion in the GEDCOM user community. Even though xref identifiers will be imported unchanged in the <code>tidyged</code> package, some systems do create their own xref identifiers on import. So you cannot assume they will survive between systems. However, they should always be internally consistent.</p>
<p>A couple of other mechanisms exist for providing unique identifiers to records:</p>
<ul>
<li>An automated record identifier (RIN) can be used by a system to automatically assign a unique identifier. Since the most obvious way of generating this would be to base it on the xref, it would introduce unnecessary duplication and file bloat and so the <code>tidyged</code> package does not use this, nor expose it to a user;</li>
<li>A user-defined reference number (REFN) and type can be defined by a user to uniquely identify a record. These are entirely optional, do not necessarily have to be unique, and a single record could have several defined. They are however a possible way of creating an enduring identifier between systems.</li>
</ul>
<p>For these reasons, neither of these mechanisms are considered to be a better alternative way of selecting records.</p>
<p style="text-align: right;">
<a href="https://jl5000.github.io/tidyged/articles/dates.html">Next article: Date types &gt;</a>
</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jamie Lendrum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
