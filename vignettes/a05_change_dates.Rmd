---
title: "Recording change dates"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Recording change dates}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Implementation

All top level records in a GEDCOM file can record the date and time they were last modified. The **tidygedcom** package includes change dates (today's date) by default every time a record is created or modified. Since the time is very unlikely to be useful in such a context, the package ignores this by default:

```{r}
library(tidygedcom)

gedcom(subm("Me")) %>% 
  print(n = Inf)
```

See row `r which(gedcom(subm("Me"))$tag == "CHAN")` and the row after for the change date for the submitter record.

By default this behaviour also applies when modifying existing records. If you would like to leave the change date alone when modifying a record, you can set `update_date_changed = FALSE` (it is TRUE by default).

## Purging change dates

For GEDCOM files with thousands of records, including change dates can add considerable bloat. For this reason it is possible to remove all change date structures with the `remove_change_dates()` function:

```{r}
gedcom(subm("Me")) %>% 
  remove_change_dates() %>% 
  print(n = Inf)
```

